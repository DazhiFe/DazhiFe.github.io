<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第8期 关于BFC，你需要了解的 | 大志前端</title>
    <meta name="description" content="">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.d0761761.css" as="style"><link rel="preload" href="/assets/js/app.860d6138.js" as="script"><link rel="preload" href="/assets/js/2.13cab879.js" as="script"><link rel="preload" href="/assets/js/40.e099c35e.js" as="script"><link rel="prefetch" href="/assets/js/10.d09a6ceb.js"><link rel="prefetch" href="/assets/js/11.5a2b7876.js"><link rel="prefetch" href="/assets/js/12.a91b9ab3.js"><link rel="prefetch" href="/assets/js/13.70dbded7.js"><link rel="prefetch" href="/assets/js/14.d5dce36d.js"><link rel="prefetch" href="/assets/js/15.d5445a07.js"><link rel="prefetch" href="/assets/js/16.626ad661.js"><link rel="prefetch" href="/assets/js/17.e8735692.js"><link rel="prefetch" href="/assets/js/18.59fad0e2.js"><link rel="prefetch" href="/assets/js/19.b88e2586.js"><link rel="prefetch" href="/assets/js/20.e71e6075.js"><link rel="prefetch" href="/assets/js/21.ff579162.js"><link rel="prefetch" href="/assets/js/22.5f856542.js"><link rel="prefetch" href="/assets/js/23.c0bed4df.js"><link rel="prefetch" href="/assets/js/24.03b70b12.js"><link rel="prefetch" href="/assets/js/25.0efae57e.js"><link rel="prefetch" href="/assets/js/26.bb875338.js"><link rel="prefetch" href="/assets/js/27.6552247d.js"><link rel="prefetch" href="/assets/js/28.1a243dc5.js"><link rel="prefetch" href="/assets/js/29.b86c4301.js"><link rel="prefetch" href="/assets/js/3.7095872d.js"><link rel="prefetch" href="/assets/js/30.b2164be9.js"><link rel="prefetch" href="/assets/js/31.f947d87d.js"><link rel="prefetch" href="/assets/js/32.24ed0b96.js"><link rel="prefetch" href="/assets/js/33.070d1959.js"><link rel="prefetch" href="/assets/js/34.adca903f.js"><link rel="prefetch" href="/assets/js/35.3288073b.js"><link rel="prefetch" href="/assets/js/36.3d13f7f3.js"><link rel="prefetch" href="/assets/js/37.468ad535.js"><link rel="prefetch" href="/assets/js/38.ed7dc717.js"><link rel="prefetch" href="/assets/js/39.019f8a3a.js"><link rel="prefetch" href="/assets/js/4.a021ebaf.js"><link rel="prefetch" href="/assets/js/41.9000351d.js"><link rel="prefetch" href="/assets/js/42.235a464b.js"><link rel="prefetch" href="/assets/js/43.b9c3cc87.js"><link rel="prefetch" href="/assets/js/44.523df039.js"><link rel="prefetch" href="/assets/js/45.0bf8011c.js"><link rel="prefetch" href="/assets/js/46.6812e920.js"><link rel="prefetch" href="/assets/js/47.6673d49d.js"><link rel="prefetch" href="/assets/js/48.baacca6b.js"><link rel="prefetch" href="/assets/js/49.1ae46e37.js"><link rel="prefetch" href="/assets/js/5.0097b90f.js"><link rel="prefetch" href="/assets/js/50.4fdafb67.js"><link rel="prefetch" href="/assets/js/51.01a8fa5f.js"><link rel="prefetch" href="/assets/js/52.3577c9b8.js"><link rel="prefetch" href="/assets/js/53.2edf4c53.js"><link rel="prefetch" href="/assets/js/54.86b2562f.js"><link rel="prefetch" href="/assets/js/55.ab095cfb.js"><link rel="prefetch" href="/assets/js/56.20453547.js"><link rel="prefetch" href="/assets/js/57.6fec5738.js"><link rel="prefetch" href="/assets/js/58.5b933352.js"><link rel="prefetch" href="/assets/js/59.011cb942.js"><link rel="prefetch" href="/assets/js/6.0d265af8.js"><link rel="prefetch" href="/assets/js/60.67ef1a0f.js"><link rel="prefetch" href="/assets/js/61.a2a165ff.js"><link rel="prefetch" href="/assets/js/62.2985d094.js"><link rel="prefetch" href="/assets/js/63.ba83348d.js"><link rel="prefetch" href="/assets/js/64.a4627492.js"><link rel="prefetch" href="/assets/js/65.b1a3226f.js"><link rel="prefetch" href="/assets/js/66.3c2a2221.js"><link rel="prefetch" href="/assets/js/7.e1d75158.js"><link rel="prefetch" href="/assets/js/8.0b49752c.js"><link rel="prefetch" href="/assets/js/9.9313a214.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d0761761.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">大志前端</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basics/html/rel.html" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/basics/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/basics/javascript/" class="nav-link">JavaScript</a></li></ul></div></div><div class="nav-item"><a href="/fullstack/" class="nav-link">Web全栈</a></div><div class="nav-item"><a href="/myarticle/" class="nav-link router-link-active">我的文章</a></div><div class="nav-item"><a href="/article/" class="nav-link">优质文章</a></div><div class="nav-item"><a href="/interview/" class="nav-link">面试</a></div><div class="nav-item"><a href="/question/" class="nav-link">问题库</a></div><div class="nav-item"><a href="/repository/" class="nav-link">常用库</a></div><div class="nav-item"><a href="/website/" class="nav-link">网站</a></div><div class="nav-item"><a href="/resources/" class="nav-link">资源</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basics/html/rel.html" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/basics/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/basics/javascript/" class="nav-link">JavaScript</a></li></ul></div></div><div class="nav-item"><a href="/fullstack/" class="nav-link">Web全栈</a></div><div class="nav-item"><a href="/myarticle/" class="nav-link router-link-active">我的文章</a></div><div class="nav-item"><a href="/article/" class="nav-link">优质文章</a></div><div class="nav-item"><a href="/interview/" class="nav-link">面试</a></div><div class="nav-item"><a href="/question/" class="nav-link">问题库</a></div><div class="nav-item"><a href="/repository/" class="nav-link">常用库</a></div><div class="nav-item"><a href="/website/" class="nav-link">网站</a></div><div class="nav-item"><a href="/resources/" class="nav-link">资源</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端帮帮忙</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myarticle/qdbbm/1.html" class="sidebar-link">第1期 聊聊css居中那点事</a></li><li><a href="/myarticle/qdbbm/2.html" class="sidebar-link">第2期 Shadow DOM来了解一下</a></li><li><a href="/myarticle/qdbbm/3.html" class="sidebar-link">第3期 使用CSS的border属性绘制各种几何形状</a></li><li><a href="/myarticle/qdbbm/4.html" class="sidebar-link">第4期 使用纯CSS制作一个开关按钮</a></li><li><a href="/myarticle/qdbbm/5.html" class="sidebar-link">第5期 关于CSS权重，你了解多少？</a></li><li><a href="/myarticle/qdbbm/6.html" class="sidebar-link">第6期 移动端使用video标签需要注意的一些问题</a></li><li><a href="/myarticle/qdbbm/7.html" class="sidebar-link">第7期 关于节流(throttle)和防抖(debounce)的理解</a></li><li><a href="/myarticle/qdbbm/8.html" class="active sidebar-link">第8期 关于BFC，你需要了解的</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myarticle/qdbbm/8.html#盒模型" class="sidebar-link">盒模型</a></li><li class="sidebar-sub-header"><a href="/myarticle/qdbbm/8.html#视觉格式化模型" class="sidebar-link">视觉格式化模型</a></li><li class="sidebar-sub-header"><a href="/myarticle/qdbbm/8.html#定位方案" class="sidebar-link">定位方案</a></li><li class="sidebar-sub-header"><a href="/myarticle/qdbbm/8.html#fc-formatting-context" class="sidebar-link">FC(Formatting context)</a></li><li class="sidebar-sub-header"><a href="/myarticle/qdbbm/8.html#bfc是什么" class="sidebar-link">BFC是什么</a></li><li class="sidebar-sub-header"><a href="/myarticle/qdbbm/8.html#bfc概念理解" class="sidebar-link">BFC概念理解</a></li><li class="sidebar-sub-header"><a href="/myarticle/qdbbm/8.html#最后" class="sidebar-link">最后</a></li><li class="sidebar-sub-header"><a href="/myarticle/qdbbm/8.html#关注" class="sidebar-link">关注</a></li></ul></li><li><a href="/myarticle/qdbbm/9.html" class="sidebar-link">第9期 你可能不知道的CSS隐藏页面元素的方法</a></li><li><a href="/myarticle/qdbbm/10.html" class="sidebar-link">第10期 浅析类数组对象</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端安全</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="第8期-关于bfc，你需要了解的"><a href="#第8期-关于bfc，你需要了解的" class="header-anchor">#</a> 第8期 关于BFC，你需要了解的</h1> <blockquote><p>BFC是耳熟能详的一个东西了，经常听到，其实在项目中也经常用到，比如最常用的清除浮动，自适应两栏布局等等。只是都没有去深究其原理和相关的知识点，今天就一起来好好学习一下吧。</p></blockquote> <p>要明白<code>BFC</code>是什么，我们要先来了解几个相关的概念。</p> <h2 id="盒模型"><a href="#盒模型" class="header-anchor">#</a> 盒模型</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Box_Model/Introduction_to_the_CSS_box_model" target="_blank" rel="noopener noreferrer">MDN<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>对其描述如下：</p> <p>当对一个文档进行布局(lay out)的时候，浏览器的渲染引擎会根据标准之一的<code>CSS基础盒模型（CSS basic box model）</code>，将所有元素表示为一个个矩形的盒子（box）。CSS决定这些盒子的大小、位置和以及属性（例如颜色、背景、边框尺寸...）。</p> <p>每个盒子由四个部分（或称区域）组成，其效用由它们各自的边界（Edge）所定义（原文：defined by their respective edges，可能意指容纳、包含、限制等）。如图，与盒子的四个组成区域相对应，每个盒子有四个边界：内容边界 Content edge、内边距边界 Padding Edge、边框边界 Border Edge、外边框边界 Margin Edge。</p> <div><img src="/images/qdbbm/8/1.jpg" alt></div> <p>我们在浏览器的控制台也可以很清楚的看到页面的每一个元素（除了单独的文本元素），其实都是一个盒子：</p> <div><img src="/images/qdbbm/8/2.jpg" alt></div> <p>更加详细的介绍可以参考MDN或者W3C规范的描述：</p> <p><a href="http://www.ayqy.net/doc/css2-1/box.html" target="_blank" rel="noopener noreferrer">http://www.ayqy.net/doc/css2-1/box.html(翻译版)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="视觉格式化模型"><a href="#视觉格式化模型" class="header-anchor">#</a> 视觉格式化模型</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Visual_formatting_model" target="_blank" rel="noopener noreferrer">MDN<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 对其描述如下：</p> <p>CSS视觉格式化模型（visual formatting model）是用来处理和在视觉媒体上显示文档时使用的计算规则。该模型是CSS的基础概念之一。</p> <p>视觉格式化模型会根据<code>CSS盒子模型</code>将文档中的元素转换为一个个盒子，每个盒子的布局由以下因素决定：</p> <ul><li>盒子的尺寸：精确指定、由约束条件指定或没有指定</li> <li>盒子的类型：行内盒子（inline）、行内级盒子（inine level）、原子行内级盒子（atomic inine-level）、块盒子（block）</li> <li>定位方案（position scheme）：普通流定位、浮动定位或绝对定位</li> <li>文档树中的其他元素：即当前盒子的子元素或兄弟元素</li> <li>视口尺寸与位置</li> <li>所包含的图片的尺寸</li> <li>其他的某些外部因素</li></ul> <p>关于不同类型盒子的介绍，大家可以直接看MDN，写的很详细了，这里就不再阐述。这边着重讲下<strong>定位方案</strong>。</p> <h2 id="定位方案"><a href="#定位方案" class="header-anchor">#</a> 定位方案</h2> <p>一旦生成了盒子，CSS引擎就需要定位它们以完成布局。在定位的时候，浏览器会根据元素的盒类型和上下文对这些元素进行定位，可以说盒就是定位的基本单位。定位时有三种定位方案，分别是：常规流(即普通流)、浮动流以及绝对定位。</p> <h3 id="常规流（normal-flow）"><a href="#常规流（normal-flow）" class="header-anchor">#</a> 常规流（Normal flow）</h3> <ul><li>在常规流中，盒子一个接着一个排列；</li> <li>在<strong>块级格式化上下文</strong>里面，它们<strong>竖着</strong>排列；</li> <li>在<strong>行内格式化上下文</strong>里面，它们<strong>横着</strong>排列；</li> <li>当<code>position</code>为<code>static</code>或<code>relative</code>，并且<code>float</code>为<code>none</code>时，会触发常规流</li> <li>对于<strong>静态定位</strong>(static positioning),<code>position: static</code>，盒的位置是常规流布局里的位置；</li> <li>对于<strong>相对定位</strong>*(relative positioning)，<code>position: relative</code>，盒偏移位置右这些属性定义：<code>top</code>、<code>bottom</code>、<code>left</code>、<code>right</code>。<strong>即使有偏移，仍然保留原有的位置</strong>，其他常规流不能占用这个位置。</li></ul> <h3 id="浮动（floats）"><a href="#浮动（floats）" class="header-anchor">#</a> 浮动（Floats）</h3> <ul><li>盒成为浮动盒（floating boxes）；</li> <li>它定位于当前行的开头或末尾；</li> <li>这<strong>导致常规流环绕在它的周边</strong>，除非设置<code>clear</code>属性；</li></ul> <h3 id="绝对定位（absolute-positioning）"><a href="#绝对定位（absolute-positioning）" class="header-anchor">#</a> 绝对定位（Absolute positioning）</h3> <ul><li>绝对定位方案，<strong>盒从常规流中被移除</strong>，不影响常规流的布局；</li> <li>它的定位相对于它的包含块，相关CSS属性：<code>top</code>、<code>bottom</code>、<code>left</code>、<code>right</code>；</li> <li>对于<code>position: absolute</code>，元素定位相对于最近的一个<code>relative</code>、<code>absolute</code>或<code>fixed</code>的父元素，如果没有则相对于<code>body</code></li></ul> <h2 id="fc-formatting-context"><a href="#fc-formatting-context" class="header-anchor">#</a> FC(Formatting context)</h2> <p>Formatting context是W3C CSS2.1规范中的一个概念。它是页面中一块渲染区域，并且有一套渲染规则，它决定了其子元素将如何定位，以及和其他元素的关系和相互作用。最常见的Formatting context有Block formatting context(简称BFC)和Inline formatting context(简称IFC)。</p> <p>CSS2.1中只有<code>BFC</code>和<code>IFC</code>，CSS3中还增加了<code>GFC</code>和<code>FFC</code>。我们主要来讲下<code>BFC</code>。</p> <p>好了，接下来轮到我们的主角<code>BFC</code>出场了。</p> <h2 id="bfc是什么"><a href="#bfc是什么" class="header-anchor">#</a> BFC是什么</h2> <p><code>BFC</code>（Block Formatting Context）直译为<strong>块级格式化上下文</strong>。它是一个独立的渲染区域，只有<strong>Box-level box</strong>参与，它规定了内部的Block-level box如何布局，并且与这个区域外部毫不相干。</p> <p>讲了这么多概念，说下自己的理解，如果有不对的地方，烦请指出，感激不尽。</p> <ul><li>当我们对一个页面进行布局的时候，浏览器的渲染引擎会根据<code>CSS的盒模型</code>将所有元素表示为一个个盒子；</li> <li>盒子的定义是由<code>视觉格式化模型</code>来定义的，盒子的类型可以分为：行内盒子（inline）、行内级盒子（inine level）、原子行内级盒子（atomic inine-level）、块盒子（block）；</li> <li>接下来就是真正的布局开始，浏览器会根据盒子的类型和所处的上下文来对这些元素进行定位，定位有3种方案，分别是：普通流、浮动流和绝对定位。</li> <li><strong>普通流中的盒子就是属于一个格式化上下文，可能是块或是行内（格式化上下文），但不能两者都是。块级盒参与块格式化上下文。行内级盒参与行内格式化上下文。</strong></li></ul> <p>是不是可以这样理解：<code>BFC</code>就是普通流中的元素布局定位时的一个执行环境？</p> <h3 id="bfc布局规则"><a href="#bfc布局规则" class="header-anchor">#</a> BFC布局规则</h3> <ul><li>内部的Box会在垂直方向，一个接一个的放置。（这边不是很理解，内部的Box不是也可能有行内元素吗？行内元素不是按水平方向来排列吗？这边可能还需要参考行内格式化上下文来理解，还有一个是<code>writing-mode</code>属性。）</li> <li>Box垂直方向的距离由<code>margin</code>决定。属于同一个<code>BFC</code>的两个相邻Box的<code>margin</code>会发生重叠</li> <li>每个元素的margin box的左边，与包含快border box的左边相接触（对于从左往右的格式化，否则相反），即使存在浮动也是如此（除非该盒建立了一个新的块格式化上下文）</li> <li><code>BFC</code>的区域不会与float box重叠</li> <li><code>BFC</code>就是页面上的一个隔离的独立的容器，容器里面的子元素不会影响到外面的元素，反之亦如此</li> <li>计算<code>BFC</code>的高度时，浮动元素也参与计算</li></ul> <h3 id="如何创建bfc"><a href="#如何创建bfc" class="header-anchor">#</a> 如何创建BFC</h3> <ul><li>根元素</li> <li><code>float</code>属性值不为<code>none</code></li> <li><code>position</code>为<code>absolute</code>或<code>fixed</code></li> <li><code>display</code>为<code>inline-block</code>、<code>table-cell</code>、<code>table-caption</code>、<code>flex</code>、<code>inline-flex</code></li> <li><code>overflow</code>不为<code>visible</code></li> <li>...</li></ul> <p>其实还有很多，这里列出的是一些比较常用的，跟详细的可以看<a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context" target="_blank" rel="noopener noreferrer">MDN<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h3 id="通过几个实例来加深理解"><a href="#通过几个实例来加深理解" class="header-anchor">#</a> 通过几个实例来加深理解</h3> <h4 id="_1-自适应两栏布局"><a href="#_1-自适应两栏布局" class="header-anchor">#</a> 1.自适应两栏布局</h4> <p>实现自适应两栏布局的方法有很多，但是我觉得<code>BFC</code>的方式应该是最简单的了。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>side<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.container</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>    
<span class="token punctuation">}</span>

<span class="token selector">.side</span> <span class="token punctuation">{</span>
  <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> lightpink<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.main</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> lightblue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>页面截图：</p> <div><img src="/images/qdbbm/8/3.jpg" alt></div> <p>根据<code>BFC</code>布局规则第3条：</p> <blockquote><p>每个元素的margin box的左边，与包含快border box的左边相接触（对于从左往右的格式化，否则相反），即使存在浮动也是如此（除非该盒建立了一个新的块格式化上下文）</p></blockquote> <p>即使存在浮动元素<code>side</code>，<code>main</code>的左边依然会与包含快的左边相接触。</p> <p>根据<code>BFC</code>布局规则第4条：</p> <blockquote><p><code>BFC</code>的区域不会与float box重叠</p></blockquote> <p>所以，我们可以给<code>main</code>创建一个新的<code>BFC</code>，这样就不会跟浮动的<code>side</code>重叠了，它会根据包含块的宽度和<code>side</code>的宽度，自动变窄。</p> <p>给<code>main</code>加上<code>overflow: hidden</code></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">main</span> <span class="token punctuation">{</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>再来看下效果：</p> <div><img src="/images/qdbbm/8/4.jpg" alt></div> <h4 id="_2-清除内部浮动"><a href="#_2-清除内部浮动" class="header-anchor">#</a> 2.清除内部浮动</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.parent</span> <span class="token punctuation">{</span>
   <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
   <span class="token property">border</span><span class="token punctuation">:</span> 2px solid blue<span class="token punctuation">;</span>
   <span class="token property">background</span><span class="token punctuation">:</span> lightblue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.child</span> <span class="token punctuation">{</span>
  <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 2px solid red<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> lightcoral<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>页面截图：</p> <div><img src="/images/qdbbm/8/5.jpg" alt></div> <p>可以看到，由于子元素设置了浮动，而父元素又没有设置高度，导致父元素高度塌陷了：没有自动被子元素的高度撑开。</p> <p>根据<code>BFC</code>布局规则第6条：</p> <blockquote><p>计算BFC的高度时，浮动元素也参与计算</p></blockquote> <p>我们可以给父元素<code>parent</code>触发<code>BFC</code>，那么它在计算高度时，内部的浮动元素也会参与计算。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.parent</span> <span class="token punctuation">{</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>再看下效果：</p> <div><img src="/images/qdbbm/8/6.jpg" alt></div> <h4 id="_3-阻止margin重叠"><a href="#_3-阻止margin重叠" class="header-anchor">#</a> 3.阻止margin重叠</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>box<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>box<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.box</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>页面截图：</p> <div><img src="/images/qdbbm/8/7.jpg" alt></div> <p>根据<code>BFC</code>布局规则第2条：</p> <blockquote><p>Box垂直方向的距离由margin决定。属于同一个BFC的两个相邻Box的margin会发生重叠</p></blockquote> <p>可以看到，第一个div的下边距跟第二个的上边距发生了重叠。</p> <p>重叠的结果按照如下规则计算：</p> <ul><li>两个相邻的外边距都是正数时，重叠结果是它们两者之间较大的值。</li> <li>两个相邻的外边距都是负数时，重叠结果是两者绝对值的较大值。</li> <li>两个外边距一正一负时，重叠结果是两者的相加的和。</li></ul> <p>产生折叠的必备条件：margin必须是邻接的!</p> <p>我们只要给其中一个div外层再包裹一层div，然后触发其生成一个新的<code>BFC</code>，它们就不会发生重叠了。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>box<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>new-bfc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>box<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.new-bfc</span> <span class="token punctuation">{</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>页面截图：</p> <div><img src="/images/qdbbm/8/8.jpg" alt></div> <p>还有很多其他的例子，比如可以避免文字环绕、多列布局等等，这里就不再一一列举，大家有兴趣的可以自己多尝试下，这里有一个网址可以在线演示，更加直观，
链接地址：<a href="https://www.cnblogs.com/xiaohuochai/p/5248536.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/xiaohuochai/p/5248536.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="创建bfc的新方式"><a href="#创建bfc的新方式" class="header-anchor">#</a> 创建BFC的新方式</h3> <p>我们上面举的例子都是通过<code>overflow</code>来创建<code>BFC</code>，但是其实这个方法会有两个问题。</p> <ol><li>这些方法本身是有自身的设计目的的，所以在使用它们创建<code>BFC</code>时可能会存在一些副作用。例如，使用<code>overflow</code>创建<code>BFC</code>后，在某些情况下可能会看到出现一个滚动条或者元素内容被裁切。这是由于<code>overflow</code>属性的设计是用来让你告诉浏览器如何定义元素的溢出状态的。浏览器执行了它最基本的定义。</li> <li>另一个问题是，即使在没有出现副作用的情况下，使用<code>overflow</code>也可能会使另一个开发人员感到困惑。他们可能会各种猜想：这里为什么要把<code>overflow</code>的值设为<code>auto</code>或<code>hidden</code>?原来的开发人员这样做的意义是什么？原来的开发人员是想让这里出现滚动条吗？</li></ol> <p>所以实际项目开发中，还需要根据项目的需求来选择合适的方法，最好也能在代码里写明注释。</p> <p>那有没有什么更好的方式呢？CSS工作组定义了一个新的属性值：<code>display: flow-root</code>。</p> <p>你可以使用<code>display: flow-root</code>安全的创建<code>BFC</code>，来解决上文中提到的各种问题：自适应两栏布局、清除内部浮动、阻止margin重叠等等。</p> <p>caniuse上<code>display: flow-root</code>在各浏览器的兼容情况，看图：</p> <div><img src="/images/qdbbm/8/9.jpg" alt></div> <p>目前来看，兼容性还是差了一点。</p> <blockquote><p>有关于<code>flow-root</code>的详细介绍可以看这篇文章：<a href="https://www.w3cplus.com/css3/display-flow-root.html" target="_blank" rel="noopener noreferrer">https://www.w3cplus.com/css3/display-flow-root.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h2 id="bfc概念理解"><a href="#bfc概念理解" class="header-anchor">#</a> BFC概念理解</h2> <p>可以想象一下，<code>BFC</code>就相当于我们现实中的一个纸箱（盒子），箱子里面的东西的放置(布局)是不会受到外部其他东西的影响的，它形成了一个独立的封闭的区域。当然它里面东西的放置（布局）也不会影响到外面的东西。</p> <h2 id="最后"><a href="#最后" class="header-anchor">#</a> 最后</h2> <p>感谢您的阅读，希望对你有所帮助。由于本人水平有限，如果文中有描述不当的地方，烦请指正，非常感谢。</p> <h2 id="关注"><a href="#关注" class="header-anchor">#</a> 关注</h2> <p>欢迎大家关注我的公众号<code>前端帮帮忙</code>，一起交流学习，共同进步！</p> <div><img src="/images/qdbbm/qdbbm.jpg" alt></div> <p>参考：</p> <p><a href="http://www.ayqy.net/doc/css2-1/visuren.html" target="_blank">视觉格式化模型</a></p> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context" target="_blank">块格式化上下文</a></p> <p><a href="https://www.cnblogs.com/lhb25/p/inside-block-formatting-ontext.html" target="_blank">前端精选文摘：BFC 神奇背后的原理</a></p> <p><a href="https://juejin.im/post/59b73d5bf265da064618731d" target="_blank">学习 BFC (Block Formatting Context)</a></p> <p><a href="https://juejin.im/post/5909db2fda2f60005d2093db" target="_blank">[布局概念] 关于CSS-BFC深入理解</a></p> <p><a href="https://www.w3cplus.com/css/understanding-css-layout-block-formatting-context.html" target="_blank">理解CSS布局和BFC</a></p> <p><a href="https://www.cnblogs.com/libin-1/p/7098468.html" target="_blank">什么是BFC</a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">1/22/2020, 12:07:03 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/myarticle/qdbbm/7.html" class="prev">第7期 关于节流(throttle)和防抖(debounce)的理解</a></span> <span class="next"><a href="/myarticle/qdbbm/9.html">第9期 你可能不知道的CSS隐藏页面元素的方法</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.860d6138.js" defer></script><script src="/assets/js/2.13cab879.js" defer></script><script src="/assets/js/40.e099c35e.js" defer></script>
  </body>
</html>

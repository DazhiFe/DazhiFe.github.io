(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{238:function(t,v,e){"use strict";e.r(v);var _=e(0),r=Object(_.a)({},(function(){var t=this,v=t.$createElement,e=t._self._c||v;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"video标签播放视频有声音没画面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#video标签播放视频有声音没画面"}},[t._v("#")]),t._v(" video标签播放视频有声音没画面")]),t._v(" "),e("h2",{attrs:{id:"问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),e("p",[t._v("前端用H5的"),e("code",[t._v("video")]),t._v("标签做了播放器，部分MP4文件上传成功后，遇到了播放时只有声音没有画面的问题。")]),t._v(" "),e("p",[t._v("经过了解之后才知道MP4视频不是说后缀名以.mp4结尾的就是MP4视频，mp4视频还包括不同的编码格式，还有不同的扩展名，都可以统一定义成MP4文件。")]),t._v(" "),e("h2",{attrs:{id:"支持的格式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#支持的格式"}},[t._v("#")]),t._v(" 支持的格式")]),t._v(" "),e("p",[t._v("目前，"),e("code",[t._v("video")]),t._v("标签支持三种视频格式："),e("code",[t._v("MPEG 4")]),t._v("、"),e("code",[t._v("WebM")]),t._v("、"),e("code",[t._v("Ogg")]),t._v("。各浏览器支持如下：")]),t._v(" "),e("img-show",{attrs:{url:"/images/html5/video.png"}}),t._v(" "),e("h2",{attrs:{id:"视频编码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#视频编码"}},[t._v("#")]),t._v(" 视频编码")]),t._v(" "),e("p",[t._v("其实，上面的三种格式只是封装格式，并非编码，而"),e("code",[t._v("video")]),t._v("标签对编码也是有要求的：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("格式")]),t._v(" "),e("th",[t._v("视频编码")]),t._v(" "),e("th",[t._v("音频编码")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("Ogg")]),t._v(" "),e("td",[t._v("Theora")]),t._v(" "),e("td",[t._v("Vorbis")])]),t._v(" "),e("tr",[e("td",[t._v("MPEG 4")]),t._v(" "),e("td",[t._v("H.264")]),t._v(" "),e("td",[t._v("AAC")])]),t._v(" "),e("tr",[e("td",[t._v("WebM")]),t._v(" "),e("td",[t._v("VP8")]),t._v(" "),e("td",[t._v("Vorbis")])])])]),t._v(" "),e("p",[t._v("所以出现这个问题的原因可能是视频的编码不是"),e("code",[t._v("H.264")]),t._v("导致的。")]),t._v(" "),e("h2",{attrs:{id:"查看编码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看编码"}},[t._v("#")]),t._v(" 查看编码")]),t._v(" "),e("p",[t._v("可以在这个网址"),e("a",{attrs:{href:"https://gpac.github.io/mp4box.js/test/filereader.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gpac.github.io/mp4box.js/test/filereader.html"),e("OutboundLink")],1),t._v("，查看视频的编码：")]),t._v(" "),e("ol",[e("li",[t._v("打开网站")]),t._v(" "),e("li",[t._v("选择文件，把你的视频上传上去")]),t._v(" "),e("li",[t._v("点击Load按钮")])]),t._v(" "),e("p",[t._v("通过以上三步就能查看到你上传的视频的编码，"),e("code",[t._v("codecs")]),t._v("就是你的视频编码，如下图：")]),t._v(" "),e("img-show",{attrs:{url:"/images/html5/codecs.png"}}),t._v(" "),e("p",[t._v("如果是这个编码，是可以正常播放的。")]),t._v(" "),e("p",[t._v("如果是下面这个，会出现有声音没画面的问题。")]),t._v(" "),e("img-show",{attrs:{url:"/images/html5/codecs2.png"}}),t._v(" "),e("h2",{attrs:{id:"解决问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解决问题"}},[t._v("#")]),t._v(" 解决问题")]),t._v(" "),e("p",[t._v("把视频文件的视频编码转换成"),e("code",[t._v("H.264")]),t._v("。")]),t._v(" "),e("p",[t._v("转码工具：")]),t._v(" "),e("ul",[e("li",[t._v("格式工厂")]),t._v(" "),e("li",[t._v("JS Video Converter："),e("a",{attrs:{href:"https://js-video-converter.com/zh/",target:"_blank",rel:"noopener noreferrer"}},[t._v(" https://js-video-converter.com/zh/ "),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://www.jianshu.com/p/aa5ba6967f46",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.jianshu.com/p/aa5ba6967f46 "),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"http://yikeshu.me/2017/08/11/js-video-play/",target:"_blank",rel:"noopener noreferrer"}},[t._v(" http://yikeshu.me/2017/08/11/js-video-play/ "),e("OutboundLink")],1)])])],1)}),[],!1,null,null,null);v.default=r.exports}}]);